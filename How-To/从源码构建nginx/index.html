<!doctype html><html lang=zh class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="nginx docs"><meta name=author content=fengzhao><link href=https://nginx.fengzhao.me/How-To/%E4%BB%8E%E6%BA%90%E7%A0%81%E6%9E%84%E5%BB%BAnginx/ rel=canonical><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.4.2, mkdocs-material-9.0.6"><title>从源码构建 nginx - nginx docs</title><link rel=stylesheet href=../../assets/stylesheets/main.558e4712.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.2505c338.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../stylesheets/extra.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#nginx class=md-skip> 跳转至 </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=页眉> <a href=../.. title="nginx docs" class="md-header__button md-logo" aria-label="nginx docs" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> nginx docs </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> 从源码构建 nginx </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary data-md-color-accent aria-label="Switch to light mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=搜索 placeholder=搜索 autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=查找> <button type=reset class="md-search__icon md-icon" title=清空当前内容 aria-label=清空当前内容 tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> 正在初始化搜索引擎 </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/fengzhao/nginx-doc title=前往仓库 class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> fengzhao/nginx-doc </div> </a> </div> </nav> <nav class=md-tabs aria-label=标签 data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../index.md class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../resources.md class=md-tabs__link> 学习资源 </a> </li> <li class=md-tabs__item> <a href=../../Introduction/%E5%88%9D%E5%AD%A6%E8%80%85%E6%8C%87%E5%8D%97/ class=md-tabs__link> 介绍 </a> </li> <li class=md-tabs__item> <a href=../../foundmental/suoyin.md class=md-tabs__link> </a> </li> <li class=md-tabs__item> <a href=../../Modules-reference/%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD/ class=md-tabs__link> Modules-reference </a> </li> <li class=md-tabs__item> <a href=../../optimize/1.overview.md class=md-tabs__link> MySQL调优 </a> </li> <li class=md-tabs__item> <a href=../../postgresql/01.postgresql简介.md class=md-tabs__link> PostgreSQL </a> </li> <li class=md-tabs__item> <a href=../../mongodb/01.简介.md class=md-tabs__link> MongoDB </a> </li> <li class=md-tabs__item> <a href=../../redis/01.redis简介.md class=md-tabs__link> Redis </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=导航栏 data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="nginx docs" class="md-nav__button md-logo" aria-label="nginx docs" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> nginx docs </label> <div class=md-nav__source> <a href=https://github.com/fengzhao/nginx-doc title=前往仓库 class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> fengzhao/nginx-doc </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../index.md class=md-nav__link> Home </a> </li> <li class=md-nav__item> <a href=../../resources.md class=md-nav__link> 学习资源 </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " data-md-toggle=__nav_3 type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 tabindex=0 aria-expanded=false> 介绍 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=介绍 data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> 介绍 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Introduction/%E5%88%9D%E5%AD%A6%E8%80%85%E6%8C%87%E5%8D%97/ class=md-nav__link> 0. 初学者指南 </a> </li> <li class=md-nav__item> <a href=../../Introduction/%E5%AE%89%E8%A3%85nginx/ class=md-nav__link> 1. 安装nginx </a> </li> <li class=md-nav__item> <a href=../../Introduction/%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%8F%82%E6%95%B0/ class=md-nav__link> 2. 命令行参数 </a> </li> <li class=md-nav__item> <a href=../../Introduction/%E6%8E%A7%E5%88%B6nginx/ class=md-nav__link> 3. 控制nginx </a> </li> <li class=md-nav__item> <a href=../../Introduction/%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%90%8D%E7%A7%B0/ class=md-nav__link> 4. 服务器名称 </a> </li> <li class=md-nav__item> <a href=../../Introduction/Nginx%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86%E8%AF%B7%E6%B1%82/ class=md-nav__link> 5. Nginx如何处理请求 </a> </li> <li class=md-nav__item> <a href=../../Introduction/%E8%AE%B0%E5%BD%95%E6%97%A5%E5%BF%97%E5%88%B0syslog/ class=md-nav__link> 6. 记录日志到syslog </a> </li> <li class=md-nav__item> <a href=../../Introduction/%E8%BF%9E%E6%8E%A5%E5%A4%84%E7%90%86%E6%96%B9%E5%BC%8F/ class=md-nav__link> 7. 连接处理方式 </a> </li> <li class=md-nav__item> <a href=../../basic/8.MySQL字符集和排序规则.md class=md-nav__link> 8. MySQL字符集和排序规则 </a> </li> <li class=md-nav__item> <a href=../../basic/9.mysql_architecture.md class=md-nav__link> 9. MySQL逻辑架构和性能优化概述 </a> </li> <li class=md-nav__item> <a href=../../basic/10.sql-Transaction.md class=md-nav__link> 10. 数据库事务和锁 </a> </li> <li class=md-nav__item> <a href=../../basic/Facts.md class=md-nav__link> 11. Facts 数据 </a> </li> <li class=md-nav__item> <a href=../../basic/12.MySQL内存概述.md class=md-nav__link> 12. MySQL内存概述 </a> </li> <li class=md-nav__item> <a href=../../basic/Conditionals-loop.md class=md-nav__link> 13. 条件判断与循环 </a> </li> <li class=md-nav__item> <a href=../../basic/Blocks.md class=md-nav__link> 14. Blocks </a> </li> <li class=md-nav__item> <a href=../../basic/Playbook-features.md class=md-nav__link> 15. Playbook 高级特性 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " data-md-toggle=__nav_4 type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 tabindex=0 aria-expanded=false> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../foundmental/suoyin.md class=md-nav__link> 1.索引相关 </a> </li> <li class=md-nav__item> <a href=../../dev/02.数据库设计.md class=md-nav__link> 2.数据库设计 </a> </li> <li class=md-nav__item> <a href=../../dev/03.在线DDL.md class=md-nav__link> 3.在线DDL </a> </li> <li class=md-nav__item> <a href=../../dev/04.MySQL连表查询算法.md class=md-nav__link> 4.联表算法 </a> </li> <li class=md-nav__item> <a href=../../dev/05.MySQL-insert语法.md class=md-nav__link> 5.insert语法 </a> </li> <li class=md-nav__item> <a href=../../advanced/dynamic-inventory.md class=md-nav__link> 使用动态主机管理云服务 </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " data-md-toggle=__nav_4_7 type=checkbox id=__nav_4_7> <label class=md-nav__link for=__nav_4_7 tabindex=0 aria-expanded=false> Ansible 安全 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Ansible 安全" data-md-level=2> <label class=md-nav__title for=__nav_4_7> <span class="md-nav__icon md-icon"></span> Ansible 安全 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../advanced/security/index.md class=md-nav__link> Ansible 控制节点安全 </a> </li> <li class=md-nav__item> <a href=../../advanced/security/firewall.md class=md-nav__link> - 节点安全: 防火墙设置 </a> </li> <li class=md-nav__item> <a href=../../advanced/security/ssh-2step.md class=md-nav__link> - 节点安全: ssh登录二次验证 </a> </li> <li class=md-nav__item> <a href=../../advanced/security/audit.md class=md-nav__link> - 节点安全: 命令审计 </a> </li> <li class=md-nav__item> <a href=../../advanced/security/vault-hosts.md class=md-nav__link> - 节点安全: 加密主机清单 </a> </li> <li class=md-nav__item> <a href=../../advanced/security/filter-command.md class=md-nav__link> 过滤 Ansible 危险指令 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " data-md-toggle=__nav_4_8 type=checkbox id=__nav_4_8> <label class=md-nav__link for=__nav_4_8 tabindex=0 aria-expanded=false> Ansible 实践 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Ansible 实践" data-md-level=2> <label class=md-nav__title for=__nav_4_8> <span class="md-nav__icon md-icon"></span> Ansible 实践 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../advanced/practice/snippets.md class=md-nav__link> Ansible Task片段 </a> </li> <li class=md-nav__item> <a href=../../advanced/practice/jenkins-and-ansible.md class=md-nav__link> 在 Jenkins 中使用 Ansible </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../advanced/ara.md class=md-nav__link> 使用 ARA 记录 Ansible 执行结果 </a> </li> <li class=md-nav__item> <a href=../../advanced/ansible-cmdb.md class=md-nav__link> 使用 Ansible-cmdb </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " data-md-toggle=__nav_5 type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 tabindex=0 aria-expanded=false> Modules-reference <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Modules-reference data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Modules-reference </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Modules-reference/%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD/ class=md-nav__link> 核心功能 </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " data-md-toggle=__nav_5_2 type=checkbox id=__nav_5_2> <label class=md-nav__link for=__nav_5_2 tabindex=0 aria-expanded=false> HTTP <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=HTTP data-md-level=2> <label class=md-nav__title for=__nav_5_2> <span class="md-nav__icon md-icon"></span> HTTP </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Modules-reference/http/ngx_http_access_module/ class=md-nav__link> ngx_http_access_module </a> </li> <li class=md-nav__item> <a href=../../Modules-reference/http/ngx_http_addition_module/ class=md-nav__link> ngx_http_addition_module </a> </li> <li class=md-nav__item> <a href=../../Modules-reference/http/ngx_http_auth_basic_module/ class=md-nav__link> ngx_http_auth_basic_module </a> </li> <li class=md-nav__item> <a href=../../Modules-reference/http/ngx_http_auth_jwt_module/ class=md-nav__link> ngx_http_auth_jwt_module </a> </li> <li class=md-nav__item> <a href=../../Modules-reference/http/ngx_http_auth_request_module/ class=md-nav__link> ngx_http_auth_request_module </a> </li> <li class=md-nav__item> <a href=../../Modules-reference/http/ngx_http_autoindex_module/ class=md-nav__link> ngx_http_autoindex_module </a> </li> <li class=md-nav__item> <a href=../../Modules-reference/http/ngx_http_browser_module/ class=md-nav__link> ngx_http_browser_module </a> </li> <li class=md-nav__item> <a href=../../Modules-reference/http/ngx_http_charset_module/ class=md-nav__link> ngx_http_charset_module </a> </li> <li class=md-nav__item> <a href=../../Modules-reference/http/ngx_http_core_module/ class=md-nav__link> ngx_http_core_module </a> </li> <li class=md-nav__item> <a href=../../dev/modules/module-doc.md class=md-nav__link> module 的帮助文档 </a> </li> <li class=md-nav__item> <a href=../../dev/modules/module-architecture.md class=md-nav__link> module 架构 </a> </li> <li class=md-nav__item> <a href=../../dev/modules/module-utilities.md class=md-nav__link> module 工具类 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../dev/pycharm-remote-development.md class=md-nav__link> 使用 PyCharm 远程开发 </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " data-md-toggle=__nav_5_4 type=checkbox id=__nav_5_4> <label class=md-nav__link for=__nav_5_4 tabindex=0 aria-expanded=false> Ansible 调试 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Ansible 调试" data-md-level=2> <label class=md-nav__title for=__nav_5_4> <span class="md-nav__icon md-icon"></span> Ansible 调试 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../dev/debug/verbose-debug.md class=md-nav__link> 详细输出 </a> </li> <li class=md-nav__item> <a href=../../dev/debug/pdb.md class=md-nav__link> pdb 本地调试 </a> </li> <li class=md-nav__item> <a href=../../dev/debug/pycharm.md class=md-nav__link> PyCharm 远程调试 </a> </li> <li class=md-nav__item> <a href=../../dev/debug/module-debug.md class=md-nav__link> 模块调试 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " data-md-toggle=__nav_5_5 type=checkbox id=__nav_5_5> <label class=md-nav__link for=__nav_5_5 tabindex=0 aria-expanded=false> Module 开发 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Module 开发" data-md-level=2> <label class=md-nav__title for=__nav_5_5> <span class="md-nav__icon md-icon"></span> Module 开发 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../dev/modules/index.md class=md-nav__link> Module 开发说明 </a> </li> <li class=md-nav__item> <a href=../../dev/modules/remote_copy.md class=md-nav__link> 创建一个简单的module </a> </li> <li class=md-nav__item> <a href=../../dev/modules/huawei-switch.md class=md-nav__link> module 示例: 连接华为交换机 </a> </li> <li class=md-nav__item> <a href=../../dev/modules/module-outher-dev.md class=md-nav__link> module 示例: 其他语言开发 </a> </li> <li class=md-nav__item> <a href=../../dev/modules/module-shell-dir.md class=md-nav__link> module 示例: dir </a> </li> <li class=md-nav__item> <a href=../../dev/modules/module-docker-facts.md class=md-nav__link> module 示例: docker_facts </a> </li> <li class=md-nav__item> <a href=../../dev/modules/module-wechat.md class=md-nav__link> module 示例: wechat </a> </li> <li class=md-nav__item> <a href=../../dev/modules/module-return.md class=md-nav__link> module 的返回值 </a> </li> <li class=md-nav__item> <a href=../../dev/modules/module-doc.md class=md-nav__link> module 的帮助文档 </a> </li> <li class=md-nav__item> <a href=../../dev/modules/module-architecture.md class=md-nav__link> module 架构 </a> </li> <li class=md-nav__item> <a href=../../dev/modules/module-utilities.md class=md-nav__link> module 工具类 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " data-md-toggle=__nav_5_6 type=checkbox id=__nav_5_6> <label class=md-nav__link for=__nav_5_6 tabindex=0 aria-expanded=false> Plugin 开发 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Plugin 开发" data-md-level=2> <label class=md-nav__title for=__nav_5_6> <span class="md-nav__icon md-icon"></span> Plugin 开发 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../dev/plugins/index.md class=md-nav__link> Plugin 开发说明 </a> </li> <li class=md-nav__item> <a href=../../dev/plugins/Action-hello.md class=md-nav__link> Action 示例: hello </a> </li> <li class=md-nav__item> <a href=../../dev/plugins/Callback-BlackHole.md class=md-nav__link> Callback 示例: BlackHole </a> </li> <li class=md-nav__item> <a href=../../dev/plugins/Filter-split.md class=md-nav__link> Filter 示例: split </a> </li> <li class=md-nav__item> <a href=../../dev/plugins/Inventory-csv.md class=md-nav__link> Inventory 示例: csv </a> </li> <li class=md-nav__item> <a href=../../dev/plugins/Lookup-github-status.md class=md-nav__link> Lookup 示例: github_status </a> </li> <li class=md-nav__item> <a href=../../dev/plugins/Vars-csv-vars.md class=md-nav__link> Vars 示例: csv_vars </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " data-md-toggle=__nav_5_7 type=checkbox id=__nav_5_7> <label class=md-nav__link for=__nav_5_7 tabindex=0 aria-expanded=false> API 使用 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="API 使用" data-md-level=2> <label class=md-nav__title for=__nav_5_7> <span class="md-nav__icon md-icon"></span> API 使用 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../dev/api/index.md class=md-nav__link> API 使用说明 </a> </li> <li class=md-nav__item> <a href=../../dev/api/api-task.md class=md-nav__link> 使用 API 运行任务 </a> </li> <li class=md-nav__item> <a href=../../dev/api/api-playbook.md class=md-nav__link> 使用 API 运行 Palybook </a> </li> <li class=md-nav__item> <a href=../../dev/api/api-suitable.md class=md-nav__link> 使用 suitable </a> </li> <li class=md-nav__item> <a href=../../dev/api/api-ansible-runner.md class=md-nav__link> 使用 ansible runner </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " data-md-toggle=__nav_6 type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6 tabindex=0 aria-expanded=false> MySQL调优 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=MySQL调优 data-md-level=1> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> MySQL调优 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../optimize/1.overview.md class=md-nav__link> 调优概述 </a> </li> <li class=md-nav__item> <a href=../../optimize/many_tables.md class=md-nav__link> 数据大小 </a> </li> <li class=md-nav__item> <a href=../../ui/awx.md class=md-nav__link> Ansible Awx </a> </li> <li class=md-nav__item> <a href=../../optimize/.md class=md-nav__link> 数据库结构调优 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " data-md-toggle=__nav_7 type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7 tabindex=0 aria-expanded=false> PostgreSQL <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=PostgreSQL data-md-level=1> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> PostgreSQL </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../postgresql/01.postgresql简介.md class=md-nav__link> 0. PostgreSQL简介 </a> </li> <li class=md-nav__item> <a href=../../postgresql/02.postgresql安装.md class=md-nav__link> 1. PogreSQL安装 </a> </li> <li class=md-nav__item> <a href=../../postgresql/03.体系架构.md class=md-nav__link> 2. PogreSQL体系架构 </a> </li> <li class=md-nav__item> <a href=../../postgresql/04.常用SQL.md class=md-nav__link> 3. 常用SQL </a> </li> <li class=md-nav__item> <a href=../../postgresql/05.继承表.md class=md-nav__link> 4. 继承 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " data-md-toggle=__nav_8 type=checkbox id=__nav_8> <label class=md-nav__link for=__nav_8 tabindex=0 aria-expanded=false> MongoDB <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=MongoDB data-md-level=1> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> MongoDB </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../mongodb/01.简介.md class=md-nav__link> 0. MongoDB概述 </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " data-md-toggle=__nav_8_2 type=checkbox id=__nav_8_2> <label class=md-nav__link for=__nav_8_2 tabindex=0 aria-expanded=false> 认证 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=认证 data-md-level=2> <label class=md-nav__title for=__nav_8_2> <span class="md-nav__icon md-icon"></span> 认证 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../roles/auth/kerberos-client.md class=md-nav__link> kerberos-client </a> </li> <li class=md-nav__item> <a href=../../roles/auth/kerberos-server.md class=md-nav__link> kerberos-server </a> </li> <li class=md-nav__item> <a href=../../roles/auth/openldap.md class=md-nav__link> openldap </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " data-md-toggle=__nav_9 type=checkbox id=__nav_9> <label class=md-nav__link for=__nav_9 tabindex=0 aria-expanded=false> Redis <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Redis data-md-level=1> <label class=md-nav__title for=__nav_9> <span class="md-nav__icon md-icon"></span> Redis </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../redis/01.redis简介.md class=md-nav__link> 0. redis概述 </a> </li> <li class=md-nav__item> <a href=../../redis/02.redis客户端.md class=md-nav__link> 2. redis客户端 </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " data-md-toggle=__nav_9_3 type=checkbox id=__nav_9_3> <label class=md-nav__link for=__nav_9_3 tabindex=0 aria-expanded=false> 认证 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=认证 data-md-level=2> <label class=md-nav__title for=__nav_9_3> <span class="md-nav__icon md-icon"></span> 认证 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../roles/auth/kerberos-client.md class=md-nav__link> kerberos-client </a> </li> <li class=md-nav__item> <a href=../../roles/auth/kerberos-server.md class=md-nav__link> kerberos-server </a> </li> <li class=md-nav__item> <a href=../../roles/auth/openldap.md class=md-nav__link> openldap </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label=目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#_1 class=md-nav__link> 原文档 </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=nginx>从源码构建 nginx<a class=headerlink href=#nginx title="Permanent link">&para;</a></h1> <p>编译时使用 <code>configure</code> 命令进行配置。它定义了系统的各个方面，包括了 nginx 进行连接处理使用的方法。最终它会创建出一个 <code>Makefile</code>。<code>configure</code> 命令支持以下参数：</p> <ul> <li> <p><strong>--prefix=path</strong></p> <p>定义一个用于保留服务器文件的目录。此目录也将用于所有通过 <code>configure</code> 设置的相对路径（除了库源码路径外）和 <code>nginx.conf</code> 配置文件。默认设置为 <code>/usr/local/nginx</code> 目录。 - <strong>--sbin-path=path</strong></p> <p>设置 nginx 可执行文件的名称。此名称仅在安装过程中使用。默认情况下，文件名为 <code>prefix/sbin/nginx</code>。 - <strong>--conf-path=path</strong></p> <p>设置 <code>nginx.conf</code> 配置文件的名称。如果需要，nginx 可以使用不同的配置文件启动，方法是使用命令行参数 <code>-c</code> 指定文件。默认情况下，文件名为 <code>prefix/conf/nginx.conf</code>。 - <strong>--pid-path=path</strong></p> <p>设置存储主进程的进程 ID 的 nginx.pid 文件名称。安装后，可以在 <code>nginx.conf</code> 配置文件中使用 <a href=http://nginx.org/en/docs/ngx_core_module.html#pid>pid</a> 指令更改文件名。默认文件名为 <code>prefix/logs/nginx.pid</code>。 - <strong>--lock-path=path</strong></p> <p>设置锁文件的名称前缀。安装后，可以在 <code>nginx.conf</code> 配置文件中使用 <a href=http://nginx.org/en/docs/ngx_core_module.html#lock_file>lock_file</a> 指令更改对应的值。默认值为 <code>prefix/logs/nginx.lock</code>。 - <strong>--error-log-path=path</strong></p> <p>设置主要错误、警告和诊断文件的名称。安装后，可以在 <code>nginx.conf</code> 配置文件中使用 <a href=http://nginx.org/en/docs/ngx_core_module.html#error_log>error_log</a> 指令更改文件名。默认情况下，文件名为 <code>prefix/logs/error.log</code>。 - <strong>--http-log-path=path</strong></p> <p>设置 HTTP 服务器主请求日志文件名称。安装后，可以在 <code>nginx.conf</code> 配置文件中使用 <a href=http://nginx.org/en/docs/http/ngx_http_log_module.html#access_log>access_log</a> 指令更改文件名。默认情况下，文件名为 <code>prefix/logs/access.log</code>。 - <strong>--build=name</strong></p> <p>设置一个可选的 nginx 构建名称 - <strong>--user=name</strong></p> <p>设置一个非特权用户名称，其凭据将由工作进程使用。安装后，可以在 <code>nginx.conf</code> 配置文件中使用 <a href=http://nginx.org/en/docs/ngx_core_module.html#user>user</a> 指令更改名称。默认的用户名为 <code>nobody</code>。 - <strong>--group=name</strong></p> <p>设置一个组的名称，其凭据将由工作进程使用。安装后，可以在 <code>nginx.conf</code> 配置文件中使用 <a href=http://nginx.org/en/docs/ngx_core_module.html#user>user</a> 指令更改名称。默认情况下，组名称设置为一个非特权用户的名称。 - <strong>--with-select_module 和 --without-select_module</strong></p> <p>启用或禁用构建允许服务器使用 <code>select()</code> 方法的模块。如果平台不支持其他更合适的方法（如 kqueue、epoll 或 /dev/poll），则将自动构建该模块。 - <strong>--with-poll_module 和 --without-poll_module</strong></p> <p>启用或禁用构建允许服务器使用 <code>poll()</code> 方法的模块。如果平台不支持其他更合适的方法（如 kqueue、epoll 或 /dev/poll），则将自动构建该模块。 - <strong>with-threads</strong></p> <p>允许使用线程池<a href=http://nginx.org/en/docs/ngx_core_module.html#thread_pool>thread pools</a> - <strong>with-file-aio</strong></p> <p>启用在FreeBSD和Linux上<a href=http://nginx.org/en/docs/http/ngx_http_core_module.html#aio>asynchronous file I/O</a> (aio)指令的使用 - <strong>--without-http_gzip_module</strong></p> <p>禁用构建 HTTP 服务器<a href=http://nginx.org/en/docs/http/ngx_http_gzip_module.html>响应压缩</a>模块。需要 zlib 库来构建和运行此模块。 - <strong>--without-http_rewrite_module</strong></p> <p>禁用构建允许 HTTP 服务器<a href=http://nginx.org/en/docs/http/ngx_http_rewrite_module.html>重定向请求</a>和<a href=http://nginx.org/en/docs/http/ngx_http_rewrite_module.html>更改请求 URI</a> 的模块。需要 PCRE 库来构建和运行此模块。 - <strong>--without-http_proxy_module</strong></p> <p>禁用构建 HTTP 服务器<a href=http://nginx.org/en/docs/http/ngx_http_proxy_module.html>代理模块</a>。 - <strong>--with-http_ssl_module</strong></p> <p>允许构建可将 <a href=http://nginx.org/en/docs/http/ngx_http_ssl_module.html>HTTPS 协议支持</a>添加到 HTTP 服务器的模块。默认情况下，此模块参与构建。构建和运行此模块需要 OpenSSL 库支持。 - <strong>with-http_v2_module</strong></p> <p>允许构建一个支持<a href=http://nginx.org/en/docs/http/ngx_http_v2_module.html>HTTP/2</a> 的模块。默认情况下，该模块不构建。 - <strong>with-http_realip_module</strong></p> <p>允许构建<a href=http://nginx.org/en/docs/http/ngx_http_realip_module.html>ngx_http_realip_module</a> 模块，该模块将客户端地址更改为在指定的header中发送的地址。该模块默认不构建。 - <strong>with-http_addition_module</strong></p> <p>允许构建<a href=http://nginx.org/en/docs/http/ngx_http_addition_module.html>ngx_http_addition_module</a> 模块，该模块能够在响应之前和之后添加文本。该模块默认不构建。 - <strong>with-http_xslt_module**和**with-http_xslt_module=dynamic</strong></p> <p>允许构建使用一个或者多个XSLT样式表转化为XML响应的<a href=http://nginx.org/en/docs/http/ngx_http_xslt_module.html>ngx_http_xslt_module</a>。该模块默认不构建。<a href=http://xmlsoft.org/XSLT/ >libxslt</a> 和 <a href=http://xmlsoft.org/ >libxml2</a> 库需要这个模块来构建和启动。 - <strong>with-http_image_filter_module**和**with-http_image_filter_module=dynamic</strong></p> <p>允许构建<a href=http://nginx.org/en/docs/http/ngx_http_image_filter_module.html>ngx_http_image_filter_module</a> 模块，该模块可以转换 JPEG, GIF, PNG, 和 WebP 格式的图片。该模块默认不构建。 - <strong>with-http_geoip_module**和**with-http_geoip_module=dynamic</strong></p> <p>允许构建<a href=http://nginx.org/en/docs/http/ngx_http_geoip_module.html>ngx_http_geoip_module</a> 模块。该模块根据客户端 IP 地址和预编译<a href=https://www.maxmind.com/en/home>MaxMind</a> 的数据库创建变量。该模块默认不构建。 - <strong>with-http_sub_module</strong></p> <p>允许构建<a href=http://nginx.org/en/docs/http/ngx_http_sub_module.html>ngx_http_sub_module</a> 模块。该模块通过将一个指定的字符串替换为另一个来修改相应。该模块默认不构建。 - <strong>with-http_dav_module</strong></p> <p>允许构建<a href=http://nginx.org/en/docs/http/ngx_http_dav_module.html>ngx_http_dav_module </a> 模块。该模块通过WebDEV协议提供文件管理自动化。该模块默认不构建。 - <strong>with-http_flv_module</strong></p> <p>允许构建<a href=http://nginx.org/en/docs/http/ngx_http_flv_module.html>ngx_http_flv_module</a> 模块。该模块为 Flash Videos (FLV) 文件提供伪流服务器端的支持。该模块默认不构建。 - <strong>with-http_mp4_module</strong></p> <p>允许构建<a href=http://nginx.org/en/docs/http/ngx_http_mp4_module.html>ngx_http_mp4_module</a> 模块。该模块为 MP4 文件提供伪流服务器端的支持。该模块默认不构建。 - <strong>with-http_gunzip_module</strong></p> <p>允许构建<a href=http://nginx.org/en/docs/http/ngx_http_gunzip_module.html>ngx_http_gunzip_module</a> 模块。该模块使用 <code>Content-Encoding: gzip</code> 来解压缩响应对于那些不支持<code>gzip</code>编码方法的客户端。该模块默认不构建。 - <strong>with-http_auth_request_module</strong></p> <p>允许构建<a href=http://nginx.org/en/docs/http/ngx_http_auth_request_module.html>ngx_http_auth_request_module</a> 模块。该模块基于子请求的结果实现客户端授权。该模块默认不构建。 - <strong>with-http_random_index_module</strong></p> <p>允许构建<a href=http://nginx.org/en/docs/http/ngx_http_random_index_module.html>ngx_http_random_index_module</a> 模块。该模块处理斜杠字符 ('/') 结尾的请求，并选择目录中的随机文件作为索引文件。该模块默认不构建。 - <strong>with-http_secure_link_module</strong></p> <p>允许构建<a href=http://nginx.org/en/docs/http/ngx_http_secure_link_module.html>ngx_http_secure_link_module</a> 模块。该模块默认不构建。 - <strong>with-http_degradation_module</strong></p> <p>允许构建 <code>with-http_degradation_module</code> 模块。该模块默认不构建。 - <strong>with-http_slice_module</strong></p> <p>允许构建<a href=http://nginx.org/en/docs/http/ngx_http_slice_module.html>ngx_http_slice_module</a> 将请求拆分为子请求的模块，每个模块都返回一定范围的响应。该模块提供了更有效的大响应缓存。该模块默认不构建。 - <strong>with-http_stub_status_module</strong></p> <p>允许构建<a href=http://nginx.org/en/docs/http/ngx_http_stub_status_module.html>ngx_http_stub_status_module</a> 模块。该模块提供对基本状态信息的访问。该模块默认不构建。 - <strong>without-http_charset_module</strong></p> <p>禁用构建压缩 HTTP 响应的<a href=http://nginx.org/en/docs/http/ngx_http_charset_module.html>ngx_http_charset_module</a> 模块。该模块将指定的字符集添加到 <code>Content-Type</code> 响应头字段，还可以将数据从一个字符集转化为另一个字符集。 - <strong>without-http_gzip_module</strong></p> <p>禁用构建压缩 HTTP 响应的<a href=http://nginx.org/en/docs/http/ngx_http_gzip_module.html>compresses responses</a> 模块。构建和运行这个模块需要 zlib 库。 - <strong>without-http_ssi_module</strong></p> <p>禁用构建<a href=http://nginx.org/en/docs/http/ngx_http_gzip_module.html>without-http_ssi_module</a> 模块。该模块在通过它的响应中处理 SSI (服务端包含) 命令。 - <strong>without-http_userid_module</strong></p> <p>允许构建<a href=http://nginx.org/en/docs/http/ngx_http_userid_module.html>ngx_http_userid_module</a> 模块。该模块设置适合客户端识别的cookie。 - <strong>without-http_access_module</strong></p> <p>禁用构建<a href=http://nginx.org/en/docs/http/ngx_http_access_module.html>ngx_http_access_module</a> 模块。该模块允许限制对某些客户端地址的访问。 - <strong>without-http_auth_basic_module</strong></p> <p>禁用构建<a href=http://nginx.org/en/docs/http/ngx_http_auth_basic_module.html>ngx_http_auth_basic_module</a> 模块。该模块允许通过使用HTTP基本身份验证协议验证用户名密码来限制对资源的访问。 - <strong>without-http_mirror_module</strong></p> <p>禁用构建<a href=http://nginx.org/en/docs/http/ngx_http_mirror_module.html>ngx_http_mirror_module</a> 模块。该模块通过创建后台镜像子请求来实现原始请求的镜像。 - <strong>without-http_autoindex_module</strong></p> <p>禁用构建<a href=http://nginx.org/en/docs/http/ngx_http_autoindex_module.html>ngx_http_autoindex_module</a> 模块。该模块处理以斜杠('/')结尾的请求，并在<a href=http://nginx.org/en/docs/http/ngx_http_index_module.html>ngx_http_index_module</a> 模块找不到索引文件的情况下生成目录列表。 - <strong>without-http_geo_module</strong></p> <p>禁用构建<a href=http://nginx.org/en/docs/http/ngx_http_geo_module.html>ngx_http_geo_module</a> 模块。该模块使用取决于客户端IP地址的值创建变量。 - <strong>without-http_map_module</strong></p> <p>禁用构建<a href=http://nginx.org/en/docs/http/ngx_http_map_module.html>ngx_http_map_module</a> 模块。该模块使用取决于其他变量的值创建变量。 - <strong>without-http_split_clients_module</strong></p> <p>禁用构建<a href=http://nginx.org/en/docs/http/ngx_http_split_clients_module.html>ngx_http_split_clients_module</a> 模块。该模块为 A/B 测试创建变量。 - <strong>without-http_referer_module</strong></p> <p>禁用构建<a href=http://nginx.org/en/docs/http/ngx_http_referer_module.html>ngx_http_referer_module</a> 模块。该模块可以阻止对 “Referer” 头字段中具有无效值的请求访问站点。 - <strong>without-http_proxy_module</strong></p> <p>禁用构建允许HTTP服务器重定向的请求和更改请求URI <a href=http://nginx.org/en/docs/http/ngx_http_rewrite_module.html>redirect requests and change URI of requests</a> 的模块。 - <strong>without-http_proxy_module</strong></p> <p>禁用构建<a href=http://nginx.org/en/docs/http/ngx_http_proxy_module.html>proxying module</a> HTTP服务器代理模块。 - <strong>without-http_fastcgi_module</strong></p> <p>禁用构建将请求传递给FastCGI服务器的<a href=http://nginx.org/en/docs/http/ngx_http_fastcgi_module.html>ngx_http_fastcgi_module</a>模块。 - <strong>without-http_uwsgi_module</strong></p> <p>禁用构建将请求传递给uwsgi服务器的<a href=http://nginx.org/en/docs/http/ngx_http_uwsgi_module.html>ngx_http_uwsgi_module</a> 模块。 - <strong>without-http_scgi_module</strong></p> <p>禁用构建将请求传递给SCGI服务器的<a href=http://nginx.org/en/docs/http/ngx_http_scgi_module.html>ngx_http_scgi_module</a> 模块。 - <strong>without-http_grpc_module</strong></p> <p>禁用构建将请求传递给个RPC服务器<a href=http://nginx.org/en/docs/http/ngx_http_grpc_module.html>ngx_http_grpc_module</a> 模块。 - <strong>without-http_memcached_module</strong></p> <p>禁用构建<a href=http://nginx.org/en/docs/http/ngx_http_memcached_module.html>ngx_http_memcached_module</a> 模块。该模块从 memcached 服务器获得响应。 - <strong>without-http_limit_conn_module</strong></p> <p>禁用构建<a href=http://nginx.org/en/docs/http/ngx_http_limit_conn_module.html>ngx_http_limit_conn_module</a> 模块。该模块限制每个密钥的链接数，例如，来自单个IP地址的链接数。 - <strong>without-http_limit_req_module</strong></p> <p>禁用构建限制每个键的请求处理速率<a href=http://nginx.org/en/docs/http/ngx_http_limit_req_module.html>ngx_http_limit_req_module</a> 模块。例如，来自单个IP地址的请求的处理速率。 - <strong>without-http_empty_gif_module</strong></p> <p>禁用构建发出单像素透明GIF<a href=http://nginx.org/en/docs/http/ngx_http_empty_gif_module.html>emits single-pixel transparent GIF</a> 模块。 - <strong>without-http_browser_module</strong></p> <p>禁用构建<a href=http://nginx.org/en/docs/http/ngx_http_browser_module.html>ngx_http_browser_module</a> 模块。该模块创建的值的变量取决于 “User-Agent” 请求标头字段的值。 - <strong>without-http_upstream_hash_module</strong></p> <p>禁用构建实现散列负载均衡的方法<a href=http://nginx.org/en/docs/http/ngx_http_upstream_module.html#hash>hash</a> 模块。<br> - <strong>without-http_upstream_ip_hash_module</strong></p> <p>禁用构建实现<a href=http://nginx.org/en/docs/http/ngx_http_upstream_module.html#ip_hash>IP_Hash</a> 负载均衡方法的模块。 - <strong>without-http_upstream_least_conn_module</strong></p> <p>禁用构建实现<a href=http://nginx.org/en/docs/http/ngx_http_upstream_module.html#least_conn>least_conn</a> 负载均衡方法的模块。 - <strong>without-http_upstream_keepalive_module</strong></p> <p>禁用构建<a href=http://nginx.org/en/docs/http/ngx_http_upstream_module.html#keepalive>caching of connections</a> 模块。该模块提供到上游服务器的链接缓存。 - <strong>without-http_upstream_zone_module</strong></p> <p>禁用构建<a href=http://nginx.org/en/docs/http/ngx_http_upstream_module.html#zone>zone</a> 模块。该模块可以将上游组的运行时状态存储在共享内存区域中。 - <strong>with-http_perl_module**和**with-http_perl_module=dynamic</strong></p> <p>构建<a href=http://nginx.org/en/docs/http/ngx_http_perl_module.html>嵌入式Perl</a> 模块。该模块默认不构建。 - <strong>--with-perl_modules_path=path</strong></p> <p>定义一个保留Perl模块的路径。 - <strong>with-perl=path</strong></p> <p>设置Perl二进制文件的名字。 - <strong>http-client-body-temp-path</strong></p> <p>定义用于存储保存客户端的请求主体的临时文件的目录。安装后，可以使用<a href=http://nginx.org/en/docs/http/ngx_http_core_module.html#client_body_temp_path>client_body_temp_path</a> 指令在nginx.conf配置文件中始终更改目录。默认的目录名为 <code>prefix/client_body_temp</code>。 - <strong>http-proxy-temp-path=path</strong></p> <p>定义一个目录，用于存储临时文件和从代理服务器接受的数据。安装后可以使用<a href=http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_temp_path>proxy_temp_path</a> 指令在nginx.conf配置文件中更改。默认的目录名为 <code>profix/proxy_temp</code> - <strong>http-fastcgi-temp-path=path</strong></p> <p>定义一个目录，用于存储临时文件和从 FastCGI 服务器接受的数据。安装后可以使用<a href=http://nginx.org/en/docs/http/ngx_http_fastcgi_module.html#fastcgi_temp_path>fastcgi_temp_path</a> 指令在nginx.conf配置文件中更改。 默认的目录为 <code>prefix/fastcgi_temp</code> - <strong>http-uwsgi-temp-path=path</strong></p> <p>定义一个目录，用于存储临时文件和从 uwsgi 服务器接受的数据。安装后可以使用<a href=http://nginx.org/en/docs/http/ngx_http_uwsgi_module.html#uwsgi_temp_path>uwsgi_temp_path</a> 指令在nginx.conf配置文件中更改。 默认的目录为 <code>prefix/uwsgi_temp</code> - <strong>http-scgi-temp-path=path</strong></p> <p>定义一个目录，用于存储临时文件和从 SCGI 服务器接受的数据。安装后可以使用<a href=http://nginx.org/en/docs/http/ngx_http_scgi_module.html#scgi_temp_path>scgi_temp_path</a> 指令在nginx.conf配置文件中更改。 默认的目录为 <code>prefix/scgi_temp</code> - <strong>without-http</strong></p> <p>禁用构建<a href=http://nginx.org/en/docs/http/ngx_http_core_module.html>HTTP</a> 模块。 - <strong>without-http-cache</strong></p> <p>禁用 HTTP 缓存。 <br> - <strong>with-mail**和**with-mail=dynamic</strong></p> <p>启用构建 POP3/IMAP4/SMTP <a href=http://nginx.org/en/docs/mail/ngx_mail_core_module.html>mail proxy</a> 模块。 - <strong>with-mail_ssl_module</strong></p> <p>启用构建<a href=http://nginx.org/en/docs/mail/ngx_mail_ssl_module.html>SSL/TLS protocol support</a> 模块，将SSL/TLS协议支持添加到邮件代理服务器。默认不构建此模块。需要OpenSSL库来构建和运行此模块。 - <strong>without-mail_pop3_module</strong></p> <p>禁用邮件代理服务器中的<a href=http://nginx.org/en/docs/mail/ngx_mail_pop3_module.html>POP3</a> 协议。 - <strong>without-mail_imap_module</strong></p> <p>禁用邮件代理服务器中的<a href=http://nginx.org/en/docs/mail/ngx_mail_imap_module.html>IMAP</a> 协议。 - <strong>without-mail_smtp_module</strong></p> <p>禁用邮件代理服务器中的<a href=http://nginx.org/en/docs/mail/ngx_mail_smtp_module.html>SMTP</a> 协议。 - <strong>with-stream**和**with-stream=dynamic</strong></p> <p>启用构建<a href=http://nginx.org/en/docs/stream/ngx_stream_core_module.html>流模块</a> 模块以进行通用的 TCP/UDP 代理和负载均衡。该模块默认不构建。 - <strong>with-stream_ssl_module</strong></p> <p>启用构建<a href=http://nginx.org/en/docs/stream/ngx_stream_ssl_module.html>SSL/TLS protocol support</a> 模块。为流模块添加SSL/TLS协议支持。默认不构建此模块。需要OpenSSL库来构建和运行此模块。 - <strong>with-stream_realip_module</strong></p> <p>启用构建<a href=http://nginx.org/en/docs/http/ngx_stream_realip_module.html>ngx_stream_realip_module</a> 模块。该模块将客户端地址更改为 PROXY 协议头中发送的地址。默认不构建此模块。 - <strong>with-stream_geoip_module**和**with-stream_geoip_module=dynamic</strong></p> <p>启用构建<a href=http://nginx.org/en/docs/stream/ngx_stream_geoip_module.html>ngx_stream_geoip_module</a> 模块。该模块根据客户端地址和预编译的<a href=http://www.maxmind.com/ >MaxMind</a> 数据库创建变量。默认不构建。 - <strong>with-stream_ssl_preread_module</strong></p> <p>禁用构建<a href=http://nginx.org/en/docs/stream/ngx_stream_ssl_preread_module.html>with-http_degradation_modulengx_stream_ssl_preread_module</a> 模块。该模块允许从<a href=https://tools.ietf.org/html/rfc5246#section-7.4.1.2>ClientHello</a> 消息中提取消息而不终止SSL/TLS。 - <strong>without-stream_limit_conn_module</strong></p> <p>禁用构建<a href=http://nginx.org/en/docs/stream/ngx_stream_limit_conn_module.html>ngx_stream_limit_conn_module</a> 模块。该模块限制每个密钥的连接数，例如，来自单个IP地址的连接数。 - <strong>without-stream_geo_module</strong></p> <p>禁用构建<a href=http://nginx.org/en/docs/stream/ngx_stream_geo_module.html>ngx_stream_geo_module</a> 模块。该模块使用取决于客户端IP地址的值创建变量。 - <strong>without-stream_map_module</strong></p> <p>禁用构建<a href=http://nginx.org/en/docs/stream/ngx_stream_map_module.html>ngx_stream_map_module</a> 模块。该模块根据其他变量的值创建值。 - <strong>without-stream_split_clients_module</strong></p> <p>禁用构建<a href=http://nginx.org/en/docs/stream/ngx_stream_split_clients_module.html>ngx_stream_split_clients_module</a> 模块。该模块为 A/B 测试创建变量 - <strong>without-stream_return_module</strong></p> <p>禁用构建<a href=http://nginx.org/en/docs/stream/ngx_stream_return_module.html>ngx_stream_return_module</a> 模块。该模块将一些指定值发送到客户端，然后关闭连接。 - <strong>without-stream_upstream_hash_module</strong></p> <p>禁用构建<a href=http://nginx.org/en/docs/stream/ngx_stream_upstream_module.html#hash>hash</a> 实现散列负载平衡方法的模块。 - <strong>without-stream_upstream_least_conn_module</strong></p> <p>禁用构建<a href=http://nginx.org/en/docs/stream/ngx_stream_upstream_module.html#least_conn>least_conn</a> 实现散列负载平衡方法的模块。 - <strong>without-stream_upstream_zone_module</strong></p> <p>禁用构建<a href=http://nginx.org/en/docs/stream/ngx_stream_upstream_module.html#zone>zone</a> 的模块。该模块可以将上游组的运行时状态存储在共享内存区域中 - <strong>with-google_perftools_module</strong></p> <p>禁用构建<a href=http://nginx.org/en/docs/ngx_google_perftools_module.html>ngx_google_perftools_module </a> 模块。该模块可以使用 <a href=https://github.com/gperftools/gperftools>Google Performance Tools</a> 分析nginx工作进程。该模块适用于nginx开发人员，默认情况下不构建。 - <strong>with-cpp_test_module</strong></p> <p>启用构建ngx_cpp_test_module模块。 - <strong>add-module=path</strong></p> <p>启用外部模块。 - <strong>add-dynamic-module=path</strong></p> <p>启用动态模块。 - <strong>with-compat</strong></p> <p>实现动态兼容模块。 - <strong>with-cc=path</strong></p> <p>设置C编译器的名称。 - <strong>with-cpp=path</strong></p> <p>设置C++处理器的名称。 - <strong>with-cc-opt=parameters</strong></p> <p>设置将添加到CFLAGS变量的其他参数。在FreeBSD下使用系统PCRE库时，应指定<code>--with-cc-opt =" - I / usr / local / include"</code>。如果需要增加 select() 支持的文件数，也可以在此处指定，例如： <code>- with-cc-opt =" - D FD_SETSIZE = 2048"</code>。 - <strong>with-ld-opt=parameters</strong></p> <p>设置将在链接期间使用的其他参数。在FreeBSD下使用系统PCRE库时，应指定<code>--with-ld-opt =" - L / usr / local / lib"</code>。 - <strong>with-cpu-opt=cpu</strong></p> <p>指定编译的 CPU ，pentium, pentiumpro, pentium3, pentium4, athlon, opteron, sparc32, sparc64, ppc64。 - <strong>without-pcre</strong></p> <p>禁用 PCRE 库的使用。 - <strong>with-pcre</strong></p> <p>强制使用 PCRE 库。 - <strong>with-pcre=path</strong></p> <p>设置 PCRE 库源的路径。需要从 <a href=http://www.pcre.org/ >PCRE</a> 站点下载分发（版本4.4 - 8.42）并将其解压缩。剩下的工作由nginx的./configure和make完成。该位置指令和 <a href=http://nginx.org/en/docs/http/ngx_http_rewrite_module.html>ngx_http_rewrite_module</a> 模块中的正则表达式支持需要该库。 - <strong>with-pcre-opt=parameters</strong></p> <p>为PCRE设置其他构建选项。 - <strong>with-zlib-opt=parameters</strong></p> <p>为zlib设置其他构建选项。 - <strong>with-zlib-asm=cpu</strong></p> <p>启用使用针对其中一个指定CPU优化的zlib汇编程序源：pentium，pentiumpro。 - <strong>with-libatomic</strong></p> <p>强制libatomic_ops库使用。 - <strong>with-libatomic=path</strong></p> <p>设置libatomic_ops库源的路径。 - <strong>with-openssl=path</strong></p> <p>设置OpenSSL库源的路径。 - <strong>with-openssl-opt=parameters</strong></p> <p>为OpenSSL设置其他构建选项。 - <strong>with-debug</strong></p> <p>启用 <a href=http://nginx.org/en/docs/debugging_log.html>调试日志</a> 。 <br> - <strong>--with-pcre=path</strong></p> <p>设置 PCRE 库的源路径。发行版（4.4 至 8.40 版本）需要从 <a href=http://www.pcre.org/ >PCRE</a> 站点下载并提取。其余工作由 nginx 的 <code>./configure</code> 和 <code>make</code> 完成。该库是 <a href=http://nginx.org/en/docs/http/ngx_http_core_module.html#location>location</a> 指令和 <a href=http://nginx.org/en/docs/http/ngx_http_rewrite_module.html>ngx_http_rewrite_module</a> 模块中正则表达式支持所必需的。 - <strong>--with-pcre-jit</strong></p> <p>使用“即时编译（just-in-time compilation）”支持（1.1.12版本的 <a href=http://nginx.org/en/docs/ngx_core_module.html#pcre_jit>pcre_jit</a> 指令）构建 PCRE 库。 - <strong>--with-zlib=path</strong></p> <p>设置 zlib 库的源路径。发行版（1.1.3 至 1.2.11 版本）需要从 <a href=http://zlib.net/ >zlib</a> 站点下载并提取。其余工作由 nginx 的 <code>./configure</code> 和 <code>make</code> 完成。该库是 <a href=http://nginx.org/en/docs/http/ngx_http_gzip_module.html>ngx_http_gzip_module</a> 模块所必需的。 - <strong>--with-cc-opt=parameters</strong></p> <p>设置添加到 CFLAGS 变量的额外参数。当在 FreeBSD 下使用系统的 PCRE 库时，应指定 <code>--with-cc-opt="-I /usr/local/include"</code>。如果需要增加 <code>select()</code> 所支持的文件数量，也可以在这里指定，如：<code>--with-cc-opt="-D FD_SETSIZE=2048"</code>。 - <strong>--with-ld-opt=parameters</strong></p> <p>设置链接期间使用的其他参数。在 FreeBSD 下使用系统 PCRE 库时，应指定--with-ld-opt="-L /usr/local/lib"`。</p> </li> </ul> <p>参数使用示例：</p> <div class=highlight><pre><span></span><code>./configure<span class=w> </span><span class=se>\</span>
<span class=w>    </span>--sbin-path<span class=o>=</span>/usr/local/nginx/nginx<span class=w> </span><span class=se>\</span>
<span class=w>    </span>--conf-path<span class=o>=</span>/usr/local/nginx/nginx.conf<span class=w> </span><span class=se>\</span>
<span class=w>    </span>--pid-path<span class=o>=</span>/usr/local/nginx/nginx.pid<span class=w> </span><span class=se>\</span>
<span class=w>    </span>--with-http_ssl_module<span class=w> </span><span class=se>\</span>
<span class=w>    </span>--with-pcre<span class=o>=</span>../pcre-8.40<span class=w> </span><span class=se>\</span>
<span class=w>    </span>--with-zlib<span class=o>=</span>../zlib-1.2.11
</code></pre></div> <p>配置完成之后，使用 <code>make</code> 和 <code>make install</code> 编译和安装 nginx。</p> <h2 id=_1>原文档<a class=headerlink href=#_1 title="Permanent link">&para;</a></h2> <p><a href=http://nginx.org/en/docs/configure.html>http://nginx.org/en/docs/configure.html</a></p> <hr> <div class=md-source-file> <small> 最后更新: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_datetime">2023-10-17 07:57:07</span> </small> </div> </article> </div> </div> <a href=# class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> 回到页面顶部 </a> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyleft &copy; 2020 - 2023 fengzhao </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.top"], "search": "../../assets/javascripts/workers/search.e5c33ebb.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script> <script src=../../assets/javascripts/bundle.51d95adb.min.js></script> </body> </html>